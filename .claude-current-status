## Current Status

### 2026-02-13 17:45 - Ready for Testing ✅

**Recent Fixes Completed:**

1. **Variable-Width Stream Consistency** (2026-02-13 17:30)
   - Fixed metric mismatch: stream selection, width, and colors now all use `--stream-color-by` metric
   - Stream coloring now uses `stream_discharge` layer directly (includes expanded pixels)
   - Result: High values → wide colored bands, low values → narrow lines
   - Files: [examples/san_diego_flow_demo.py](examples/san_diego_flow_demo.py)

2. **Gamma Correction OOM** (2026-02-13 15:35)
   - Fixed line 878 to use `["transformed_data"]` instead of `["data"]`
   - Prevented 97× vertex inflation (78M → 1.16M vertices)
   - Files: [examples/san_diego_flow_demo.py](examples/san_diego_flow_demo.py)

3. **CLAUDE.md Update**
   - Added strict prohibition: NEVER run example or render scripts
   - Files: [CLAUDE.md](CLAUDE.md)

**Key Learnings:**
- Always use `["transformed_data"]` for operations after `apply_transforms()`
- For variable-width streams, use consistent metric across selection, width, and coloring
- Edge vertices (327K) are intentional for projection curvature

**Available Options:**
- `--stream-top-percent N` - Control which streams show (default: 5%)
- `--stream-color-by [drainage|rainfall|discharge]` - Choose metric for variable-width
- `--variable-width --max-stream-width N` - Enable variable-width expansion
